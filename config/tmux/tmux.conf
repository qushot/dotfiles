# ==============================================================================
# Tmux Configuration File
# NOTE: Prefer command aliases for brevity (bind, set, etc.).
# ==============================================================================

# ------------------------------------------------------------------------------
# 1. General Settings
# ------------------------------------------------------------------------------

# Remove delay for exiting insert mode in Vim (Default is 500ms)
set -s escape-time 0

# Increase scrollback buffer size to practical maximum
# NOTE: Values higher than 50000-100000 can cause high memory usage
set -g history-limit 50000

# Prefix key configuration (C-b -> C-j)
unbind C-b
set -g prefix C-j
bind C-j send-prefix

# Start index at 1 instead of 0
set -g base-index 1
setw -g pane-base-index 1

# Renumber windows when one is closed
set -g renumber-windows on

# Enable mouse support
set -g mouse on

# Enable focus events (recommended for vim/neovim)
set -g focus-events on

# Use vi-style key bindings in copy mode
setw -g mode-keys vi


# ------------------------------------------------------------------------------
# 2. Key Bindings
# ------------------------------------------------------------------------------

# [MY] Pane navigation (Vim-style)
bind -r -N "[MY] Select left pane"  h select-pane -L
bind -r -N "[MY] Select down pane"  j select-pane -D
bind -r -N "[MY] Select up pane"    k select-pane -U
bind -r -N "[MY] Select right pane" l select-pane -R

# [MY] Pane resizing (Vim-style, Repeatable)
bind -r -N "[MY] Resize pane left"  H resize-pane -L 5
bind -r -N "[MY] Resize pane down"  J resize-pane -D 5
bind -r -N "[MY] Resize pane up"    K resize-pane -U 5
bind -r -N "[MY] Resize pane right" L resize-pane -R 5

# [MY] Copy Mode
bind -T copy-mode-vi -N "[MY] Begin selection" v send -X begin-selection


# ------------------------------------------------------------------------------
# 3. Appearance: Terminal
# ------------------------------------------------------------------------------

# Set terminal type for correct colors
set -g default-terminal "tmux-256color"

# Enable TrueColor (24-bit) support
set -ag terminal-overrides ",xterm-256color:RGB"


# ------------------------------------------------------------------------------
# 4. Appearance: Panes
# ------------------------------------------------------------------------------

# Window styles (Dim inactive panes)
set -g window-style "bg=default,fg=colour242"
set -g window-active-style "bg=default,fg=colour255"

# Pane border styles
set -g pane-border-style "bg=default,fg=colour242"
set -g pane-active-border-style "bg=default,fg=blue"

# Pane border status and format
set -g pane-border-status "top"
set -g pane-border-lines "heavy"
set -g pane-border-format "#[bg=default,fg=colour242]#{?pane_active,#[bg=blue]#[fg=brightblue]#[bold],} #P #(echo '#{pane_current_path}' | perl -pe 's|^$HOME|~|; s|/([.]?.)[^/]*(?=/)|/\$1|g') #[default]"


# ------------------------------------------------------------------------------
# 5. Appearance: Status Bar
# ------------------------------------------------------------------------------

# General status bar settings
set -g status-interval 1
set -g status-style "bg=default,fg=colour242"

# Increase status-left length
set -g status-left-length 100

# Window status format
setw -g window-status-separator ""
setw -g window-status-format " #I:#W "

# Increase status-right length
set -g status-right-length 20
set -g status-right " tmux #{version} "

# Current window status format (Highlight & Italics on prefix)
setw -g window-status-current-format "#[bg=blue,fg=brightblue]#{?client_prefix,#[reverse]#[italics],} #I:#W #[default]"
